name: Release New Version

on:
  workflow_dispatch:

env:
  PPR_AUTH: ${{ secrets.PPR_AUTH }}

jobs:
  release:
    name: Release
    runs-on: ubuntu-latest

    steps:
      - name: Publish Version to PPR
        if: ${{ secrets.PUBLISHED == 'true' }}
        run: |
          curl -X POST -H "Authorization: $PPR_AUTH" https://api.pulsar-edit.dev/api/packages/${{ github.event.repository.name }}/versions
